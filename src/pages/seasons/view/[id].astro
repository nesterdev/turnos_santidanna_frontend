---
import DashboardLayout from "../../../components/layouts/DashboardLayout.astro";
import { apiFetch } from "../../../lib/utils/fetch.js";

const { id } = Astro.params;

let season = null;
let error = "";

// Cargar datos
try {
  season = await apiFetch(`/seasons/${id}`);
} catch (err) {
  error = "No se pudo cargar la temporada.";
}
---

<DashboardLayout title="Detalle de Temporada">

  <h1 class="text-2xl font-semibold mb-6">Detalles de la Temporada</h1>

  {error && (
    <p class="p-3 bg-red-100 text-red-600 rounded mb-4">{error}</p>
  )}

  {season ? (
    <div class="bg-white shadow rounded-lg p-6 max-w-2xl">

      <div class="mb-4">
        <h2 class="text-lg font-semibold">Nombre</h2>
        <p class="text-gray-700">{season.name}</p>
      </div>

      <div class="mb-4">
        <h2 class="text-lg font-semibold">Fecha Inicio</h2>
        <p class="text-gray-700">{season.start_date}</p>
      </div>

      <div class="mb-4">
        <h2 class="text-lg font-semibold">Fecha Fin</h2>
        <p class="text-gray-700">{season.end_date}</p>
      </div>

      <!-- BOTONES -->
      <div class="flex gap-3 mt-6">
        <a
          href={`/seasons/edit/${id}`}
          class="px-4 py-2 bg-[#FF3131] text-white rounded hover:bg-[#FF3232]"
        >
          Editar
        </a>

        <button
          onclick={`openConfirmModal('/api/delete-season/${id}')`}
          class="px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700"
        >
          Eliminar
        </button>

        <a
          href="/seasons"
          class="px-4 py-2 bg-gray-300 rounded hover:bg-gray-400"
        >
          Volver
        </a>
      </div>

    </div>
  ) : (
    <p class="text-gray-500">Cargando informaci√≥n...</p>
  )}

</DashboardLayout>

<script>
  import { openConfirmModal } from "../../../lib/utils/modal.js";
</script>
